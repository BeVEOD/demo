<%;################################################
## This file and all its content belong to Faveod S.A.S unless a commercial
## contract signed by a representant of Faveod S.A.S states otherwise.
##########
# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
# EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
# MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
# NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
# LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
# OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
# WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
################################################
## This has been generated by Faveod Generator on Thu Oct 31 16:38:10 +0100 2013
## It should be placed at 'app/views/system_settings/list_logs.html.erb'
## All manual modifications will be destroyed on next generation
################################################ %>
<style>.red {color:red} .pur{color:purple}
<%= @sess_h.map{|s,v| ".sess_#{s} {background-color:#{v};}"}.join(' ') %>
</style>
<h2 class="title"><img src="/images/page_icons/page_white_text.png" alt="<%= _(%q{List Logs}) %>" /> <%= _("%{top} Most Recent Requests from the %{lines} last lines") % {:top => @top, :lines => @lines} %> </h2>
<%= _("The size of %{file} log file is: %{size}") % {:file => params[:log_file], :size => number_to_human_size(@log_file_size)} %>
<% form_tag({:action => :clear_logs}, :style => "display:inline;") do %><input data-disable-with="<%= h(_(%q{Processing...})) %>" disable_with="Processing..." id="list_logs_clear-logs_form_submit" name="commit" type="submit" value="<%= _(%q{Clear Logs}) %>" /><% end %>
<br />
<%= _(%q{Top: }) %><%= [5, 10, 20, 30, 40, 50, 70, 100].map{|l|
	link_to(l.to_s, params.merge(:top => l), :style => (@top == l ? 'font-weight:bold' : ''))
}.join(' ').html_safe %><br />
<%= _(%q{Mode: }) %><%= %w(development production test).map{|l|
	link_to(l, params.merge(:log_file => l), :style => (params[:log_file] == l ? 'font-weight:bold' : ''))
}.join(' ').html_safe %><br />
<%= _(%q{Show SQL: }) %><%= %w(true false).map{|l|
	link_to(_(l), params.merge(:show_sql => l), :style => (params[:show_sql] == l ? 'font-weight:bold' : ''))
}.join(' ').html_safe %>

<% @logs.reverse.each_with_index do |log,i| %>
<fieldset id="fslog_<%= i+1 %>" class="x-fieldset sess_<%=h @sess[i] %>"><legend><%=h log.shift %> (<%= (u = @users.select{|u| u.last_session_id == @sess[i]}.first) ? u.login : 'disconnected' %>)</legend>
  <% log.each do |l| %>
<% if l =~ /.\[4;35;1m/ %>
<span class="red"><%=h l.gsub(/.\[4;35;1m/, '').gsub(/.\[0(;1)*m/, '') %>
<% elsif l =~ /.\[4;36;1m/ %><span class="pur"><%=h l.gsub(/.\[4;36;1m/, '').gsub(/.\[0(;1)*m/, '') %>
<% else %><span><%=h l %>
<% end %></span><br />
  <% end %>
</fieldset>
<% end %>
