<%;################################################
## This file and all its content belong to Faveod S.A.S unless a commercial
## contract signed by a representant of Faveod S.A.S states otherwise.
##########
# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
# EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
# MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
# NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
# LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
# OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
# WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
################################################
## This has been generated by Faveod Generator on Thu Oct 31 16:38:12 +0100 2013
## It should be placed at 'app/views/smart_queries/search.html.erb'
## All manual modifications will be destroyed on next generation
################################################ %>
<h2 class="title"><img src="/images/page_icons/magnifier.png" alt="<%= _(%q{Search}) %>" /> <%= _("Searching %{page}") % {:page => _("Smart Query")} %> </h2>


<div id="container" class="content align_fields">
<div class="fields">
<form action="<%= "/#{params[:lang]}" if params[:lang] %>/smart_queries/search" data-update="search_results" id="smart_queries_search_form" method="post">
	<fieldset style="border:none;" id="smart_query_<%=  @smart_query.id || 0  %>_root_container" >
<label class="input_string" data-field="name" for="name_for" id="smart_queries_name_<%= @smart_query.id || 0 %>"><%= s_(%q{Name: }) %><select class="not-aligned comparator" id="comp_name" name="comp_name"><%= options_for_select([['','']]+(SmartQuery::COMPARATORS[:name] || {}).keys.map{|k| [s_("string|#{k}"), k]}) %></select>
<input id="smart_query_<%= @smart_query.id || 0 %>_name" maxlength="255" name="smart_query[<%=  @smart_query.id || 0  %>][name]" type="text" value="<%=h @smart_query.name %>" /></label>
<label class="input_string" data-field="table_sid" for="table_sid_for" id="smart_queries_table_sid_<%= @smart_query.id || 0 %>"><%= s_(%q{Table: }) %><select class="not-aligned comparator" id="comp_table_sid" name="comp_table_sid"><%= options_for_select([['','']]+(SmartQuery::COMPARATORS[:table_sid] || {}).keys.map{|k| [s_("string|#{k}"), k]}) %></select>
<input id="smart_query_<%= @smart_query.id || 0 %>_table_sid" maxlength="255" name="smart_query[<%=  @smart_query.id || 0  %>][table_sid]" type="text" value="<%=h @smart_query.table_sid %>" /></label>
<label class="input_static_list" data-field="joining_criteria" for="joining_criteria_for" id="smart_queries_joining_criteria_<%= @smart_query.id || 0 %>"><%= s_(%q{Joining Criteria: }) %><select class="not-aligned comparator" id="comp_joining_criteria" name="comp_joining_criteria"><%= options_for_select([['','']]+(SmartQuery::COMPARATORS[:joining_criteria] || {}).keys.map{|k| [s_("static_list|#{k}"), k]}) %></select>
<select name="smart_query[<%=  @smart_query.id || 0  %>][joining_criteria]" id="smart_query_<%= @smart_query.id || 0 %>_joining_criteria" >
<option value=""><%= s_(%q{static_list|[All]}) %></option>
<%= options_for_select(@smart_query.joining_criteria__potential_values(@current_user).map{|p| [_(p), (SmartQuery::JOINING_CRITERIA.index(p) || -1 )+1] }) %>
</select></label>


</fieldset>

  <input disable_with="" id="search_search_form_submit" name="commit" type="submit" value="<%= _(%q{Search}) %>" />
</form>
</div>
<div id="search_results"></div>
</div>

<% if @pres_mode == :list_zoom %>
<a href="#" data-method="get" onclick="new Ajax.Updater('smart_queries_element', '<%= "/#{params[:lang]}" if params[:lang] %>/smart_queries/index', {asynchronous:true, evalScripts:true}); return false;" rel="nofollow" title="<%= _(%q{Index of all smart_queries.}) %>"><img src="/images/page_icons/table_lightning.png" alt="<%= _(%q{Back}) %>" title="<%= _(%q{Back}) %>"/> <%= _(%q{Back}) %></a>
<% else %>
<a href="<%= "/#{params[:lang]}" if params[:lang] %>/smart_queries/index" data-method="get" rel="nofollow" title="<%= _(%q{Index of all smart_queries.}) %>"><img src="/images/page_icons/table_lightning.png" alt="<%= _(%q{Back}) %>" title="<%= _(%q{Back}) %>"/> <%= _(%q{Back}) %></a>
<% end %>


<script type="text/javascript">
//<![CDATA[



function onready_search_call() {

$('#smart_queries_search_form').on('submit', function(evt) {
  var upd = $(this).data('update');
  evt.preventDefault();
  $.post(this.action, {query:Storage.jsonify_form(this)}).success(function(r) { $('#'+upd).html(r); });
})

}
<% if request.xhr? %>onready_search_call();<% else %> if (document.observe) {
document.observe('dom:loaded', onready_search_call)
} else if (typeof(jQuery) != 'undefined') {
jQuery(document).ready(onready_search_call)
}<% end %>




//]]>
</script>