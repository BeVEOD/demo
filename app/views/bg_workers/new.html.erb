<%;################################################
## This file and all its content belong to Faveod S.A.S unless a commercial
## contract signed by a representant of Faveod S.A.S states otherwise.
##########
# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
# EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
# MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
# NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
# LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
# OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
# WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
################################################
## This has been generated by Faveod Generator on Thu Oct 31 16:38:11 +0100 2013
## It should be placed at 'app/views/bg_workers/new.html.erb'
## All manual modifications will be destroyed on next generation
################################################ %>
<h2 class="title"><img src="/images/page_icons/add.png" alt="<%= _(%q{New}) %>" /> <%= _("New Bg Worker") %> </h2>
<% @bg_worker.id = 0 %>
<div class="content" id="container">
 <div class="align_fields">
<%= error_messages_for 'bg_worker' %>
<form action="<%= "/#{params[:lang]}" if params[:lang] %>/bg_workers/create" id="bg_worker_<%= @bg_worker.id || 0 %>_form" method="post">
<fieldset style="border:none;" id="bg_worker_<%=  @bg_worker.id || 0  %>_root_container" >
<fieldset id="bg_worker_<%=  @bg_worker.id || 0  %>_start_conditions" >
<legend for="bg_worker_<%=  @bg_worker.id || 0  %>_start_conditions" id="bg_workers_start_conditions_<%= @bg_worker.id || 0 %>"><%= s_(%q{Start Conditions}) %></legend>
<label for="bg_worker_<%=  @bg_worker.id || 0  %>_every" id="bg_workers_every_<%= @bg_worker.id || 0 %>"><%= s_(%q{Every: }) %><select multiple="true" size="7" name="bg_worker[<%=  @bg_worker.id || 0  %>][every][]" id="bg_worker_<%= @bg_worker.id || 0 %>_every" >
<option value="0"><%= _(%q{[None]}) %></option>
<%= options_for_select(@bg_worker.every__potential_values(@current_user).map{|p| [_(p), (BgWorker::EVERIES.index(p) || -1 )+1] }, @bg_worker.every__index) %>
</select></label>

<label for="bg_worker_<%=  @bg_worker.id || 0  %>_from" id="bg_workers_from_<%= @bg_worker.id || 0 %>"><%= s_(%q{From: }) %><%= datetime_select('bg_worker', 'from', :index => (@bg_worker.id || 0)  )%></label>
<label for="bg_worker_<%=  @bg_worker.id || 0  %>_cron" id="bg_workers_cron_<%= @bg_worker.id || 0 %>"><%= s_(%q{Cron: }) %><input id="bg_worker_<%= @bg_worker.id || 0 %>_cron" maxlength="255" name="bg_worker[<%=  @bg_worker.id || 0  %>][cron]" type="text" value="<%=h @bg_worker.cron %>" /></label>
<label for="bg_worker_<%=  @bg_worker.id || 0  %>_triggered_by" id="bg_workers_triggered_by_<%= @bg_worker.id || 0 %>"><%= s_(%q{Triggered by: }) %><select name="bg_worker[<%=  @bg_worker.id || 0  %>][triggered_by]" id="bg_worker_<%= @bg_worker.id || 0 %>_triggered_by" >
<%= options_for_select(@bg_worker.triggered_by__potential_values(@current_user).map{|p| [_(p), (BgWorker::TRIGGERED_BIES.index(p) || -1 )+1] }, @bg_worker.triggered_by__index) %>
</select></label>
<label for="bg_worker_<%=  @bg_worker.id || 0  %>_no_duplicate" id="bg_workers_no_duplicate_<%= @bg_worker.id || 0 %>"><%= s_(%q{No duplicate: }) %><input name="bg_worker[<%=  @bg_worker.id || 0  %>][no_duplicate]" type="hidden" value="0" /><input type="checkbox" value="1"  id="bg_worker_<%= @bg_worker.id || 0 %>_no_duplicate" name="bg_worker[<%=  @bg_worker.id || 0  %>][no_duplicate]" <%= 'checked="checked" ' if @bg_worker.no_duplicate? %>/></label>
</fieldset>

<fieldset id="bg_worker_<%=  @bg_worker.id || 0  %>_worker" >
<legend for="bg_worker_<%=  @bg_worker.id || 0  %>_worker" id="bg_workers_worker_<%= @bg_worker.id || 0 %>"><%= s_(%q{Worker}) %></legend>
<label for="bg_worker_<%=  @bg_worker.id || 0  %>_name" id="bg_workers_name_<%= @bg_worker.id || 0 %>"><%= s_(%q{Name: }) %><input id="bg_worker_<%= @bg_worker.id || 0 %>_name" maxlength="255" name="bg_worker[<%=  @bg_worker.id || 0  %>][name]" type="text" value="<%=h @bg_worker.name %>" /></label>


<table class="num_toggle">
  <tr>
    <td><label for="bg_worker_<%=  @bg_worker.id || 0  %>_priority" id="bg_workers_priority_<%= @bg_worker.id || 0 %>"><%= s_(%q{Priority: }) %><input id="bg_worker_<%= @bg_worker.id || 0 %>_priority" name="bg_worker[<%=  @bg_worker.id || 0  %>][priority]" type="text" value="<%=h @bg_worker.priority %>" /></label>
    </td>
    <td class='toggle'>
      <div class="button plus " >
         + 
      </div>
      <div class="button minus " >
         - 
      </div>
    </td>
  <tr>
</table>
<label for="bg_worker_<%=  @bg_worker.id || 0  %>_planned_at" id="bg_workers_planned_at_<%= @bg_worker.id || 0 %>"><%= s_(%q{Planned at: }) %><%= datetime_select('bg_worker', 'planned_at', :index => (@bg_worker.id || 0)  )%></label>
</fieldset>




</fieldset>

<input data-disable-with="<%= h(_(%q{Creating...})) %>" disable_with="Creating..." id="new_create_form_submit" name="commit" type="submit" value="<%= _(%q{Create}) %>" />
<input id="new_create-and-new_form_submit" name="commit_and_new" type="submit" value="<%= _(%q{Create and new}) %>" />
</form>
 </div>
</div>
<% if @pres_mode == :list_zoom %>
<a href="#" data-method="get" onclick="new Ajax.Updater('bg_workers_element', '<%= "/#{params[:lang]}" if params[:lang] %>/bg_workers/index', {asynchronous:true, evalScripts:true}); return false;" rel="nofollow" title="<%= _(%q{Index of all bg_workers.}) %>"><img src="/images/default/s.gif" alt="<%= _(%q{Index}) %>" title="<%= _(%q{Index}) %>" width="16" /> <%= _(%q{Back}) %></a>
<% else %>
<a href="<%= "/#{params[:lang]}" if params[:lang] %>/bg_workers/index" data-method="get" rel="nofollow" title="<%= _(%q{Index of all bg_workers.}) %>"><img src="/images/default/s.gif" alt="<%= _(%q{Index}) %>" title="<%= _(%q{Index}) %>" width="16" /> <%= _(%q{Back}) %></a>
<% end %>
<script type="text/javascript">
//<![CDATA[



function onready_new_call() {
var f = $('#bg_worker_<%=  @bg_worker.id || 0  %>_priority')
  if (f.val() == "") { f.val(0) } 
  if (f) {
    var plus = f.parent().parents('table').first().find('.button.plus')
    if (plus) { 
      $(plus).click(function(x) {
        var field = $('#bg_worker_<%=  @bg_worker.id || 0  %>_priority')
        var val = parseFloat(field.val())
        var max = false
        if (field && !isNaN(val) && (!max || val < max) ) { field.val(val + 1) } 
      })
    }
    var minus = f.parent().parents('table').first().find('.button.minus')
    if (minus) { 
      $(minus).click(function(x) {
        var field = $('#bg_worker_<%=  @bg_worker.id || 0  %>_priority')
        var val = parseFloat(field.val())
        var min = 0
        if (field && !isNaN(val) && (val > min) ) { field.val(val - 1) } 
      })
    }
  }
}
<% if request.xhr? %>onready_new_call();<% else %> if (document.observe) {
document.observe('dom:loaded', onready_new_call)
} else if (typeof(jQuery) != 'undefined') {
jQuery(document).ready(onready_new_call)
}<% end %>




//]]>
</script>